# https://taskfile.dev

version: '3'

vars:
  GREETING: Hello, World!

tasks:
  default:
    cmds:
      - echo "{{.GREETING}}"
    silent: true
  #  connect rpc测试
  proto:
    dir: ./proto
    cmds:
      - protoc --proto_path=.  --go_out=. --go_opt=paths=import ./hello.proto
      - protoc --proto_path=. --go-grpc_out=. --go-grpc_opt=paths=import ./hello.proto

  runClient:
      dir: ./cmd/client
      cmds:
        - go run main.go
  runServer:
      dir: ./cmd/server
      cmds:
        - go run main.go --port :8011
  runServer2:
    dir: ./cmd/server
    cmds:
      - go run main.go --port :8012
  #db test
  dbMysql:
    dir: ./cmd/db/mysql
    cmds:
      - go run main.go
  dbRedis:
    dir: ./cmd/db/redis
    cmds:
      - go run main.go

  #config
  yamlConfig:
      dir: ./cmd/config
      cmds:
        - go run main.go
  # observe
  observelog:
      dir: ./cmd/observe/logx
      cmds:
        - go run main.go